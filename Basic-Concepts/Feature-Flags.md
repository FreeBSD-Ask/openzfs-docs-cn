# 特性标志

ZFS 的磁盘格式最初使用单一数字进行版本控制，每当格式发生变化时该数字就会增加。这种编号方式在 ZFS 由单一组织开发时是可行的。

对于 OpenZFS 的分布式开发，版本编号方式不适用。任何对数字的修改都需要在所有实现中达成一致，以确认对磁盘格式的每次更改。

OpenZFS 特性标志——作为传统版本编号的替代——**可为磁盘格式的每次更改设置唯一命名的池属性**。这种方法支持：

* 独立的格式更改
* 相互依赖的格式更改

## 兼容性

当池使用的所有 **特性** 都被多个 OpenZFS 实现支持时，可以在这些实现之间移植磁盘格式。

启用后具有独占性的特性应定期移植到所有发行版。

## 参考资料

[ZFS Feature Flags](http://web.archive.org/web/20160419064650/http://blog.delphix.com/csiden/files/2012/01/ZFS_Feature_Flags.pdf)（Christopher Siden，2012-01，Internet Archive Wayback Machine）特别指出：“… 对于池版本 1-28，遗留版本号仍然存在 …”。

[zpool-features(7) 手册页](https://openzfs.github.io/openzfs-docs/man/7/zpool-features.7.html) - OpenZFS

[zpool-features](http://illumos.org/man/5/zpool-features) (5) – illumos

## 各操作系统的特性标志实现

| 特性标志                                 | 只读兼容   | OpenZFS（Linux、FreeBSD 13+）                                                               | FreeBSD 早期 OpenZFS                                                                        | Illumos                                                                                   | Joyent                                                                                    | NetBSD                                                                                    | Nexenta | OmniOS CE | OpenZFS on OS X |
| :------------------------------------ | :------ | :----------------------------------------------------------------------------------------- | :----------------------------------------------------------------------------------------- | :----------------------------------------------------------------------------------------- | :----------------------------------------------------------------------------------------- | :----------------------------------------------------------------------------------------- | :------- | :--------- | :--------------- |
| 0.6.5.11                             | 0.7.13 | 0.8.6                                                                                     | 2.0.7                                                                                     | 2.1.16                                                                                    | 2.2.9                                                                                     | 2.3.5                                                                                     | 2.4.0   | master    | 12              |
| org.zfsonlinux:allocation_classes    | 是      | 否                                                                                         | 否                                                                                         | 是                                                                                         | 是                                                                                         | 是                                                                                         | 是       | 是         | 是               |
| com.delphix:async_destroy            | 是      | 是                                                                                         | 是                                                                                         | 是                                                                                         | 是                                                                                         | 是                                                                                         | 是       | 是         | 是               |
| org.openzfs:blake3                   | 否      | 否                                                                                         | 否                                                                                         | 否                                                                                         | 否                                                                                         | 否                                                                                         | 是       | 是         | 是               |
| com.fudosecurity:block_cloning       | 是      | 否                                                                                         | 否                                                                                         | 否                                                                                         | 否                                                                                         | 否                                                                                         | 是       | 是         | 是               |
| com.truenas:block_cloning_endian     | 是      | 否                                                                                         | 否                                                                                         | 否                                                                                         | 否                                                                                         | 否                                                                                         | 否       | 否         | 是               |
| com.datto:bookmark_v2                | 否      | 否                                                                                         | 否                                                                                         | 是                                                                                         | 是                                                                                         | 是                                                                                         | 是       | 是         | 是               |
| com.delphix:bookmark_written         | 否      | 否                                                                                         | 否                                                                                         | 否                                                                                         | 是                                                                                         | 是                                                                                         | 是       | 是         | 是               |
| com.delphix:bookmarks                | 是      | 是                                                                                         | 是                                                                                         | 是                                                                                         | 是                                                                                         | 是                                                                                         | 是       | 是         | 是               |
| com.nexenta:class_of_storage         | 是      | 否                                                                                         | 否                                                                                         | 否                                                                                         | 否                                                                                         | 否                                                                                         | 否       | 否         | 否               |
| org.openzfs:device_rebuild           | 是      | 否                                                                                         | 否                                                                                         | 否                                                                                         | 是                                                                                         | 是                                                                                         | 是       | 是         | 是               |
| com.delphix:device_removal           | 否      | 否                                                                                         | 否                                                                                         | 是                                                                                         | 是                                                                                         | 是                                                                                         | 是       | 是         | 是               |
| org.openzfs:draid                    | 否      | 否                                                                                         | 否                                                                                         | 否                                                                                         | 否                                                                                         | 是                                                                                         | 是       | 是         | 是               |
| com.klarasystems:dynamic_gang_header | 否      | 否                                                                                         | 否                                                                                         | 否                                                                                         | 否                                                                                         | 否                                                                                         | 否       | 否         | 是               |
| org.illumos:edonr                    | 否      | 是[1](https://openzfs.github.io/openzfs-docs/Basic%20Concepts/Feature%20Flags.html#note_1) | 是[1](https://openzfs.github.io/openzfs-docs/Basic%20Concepts/Feature%20Flags.html#note_1) | 是[1](https://openzfs.github.io/openzfs-docs/Basic%20Concepts/Feature%20Flags.html#note_1) | 是[1](https://openzfs.github.io/openzfs-docs/Basic%20Concepts/Feature%20Flags.html#note_1) | 是[1](https://openzfs.github.io/openzfs-docs/Basic%20Concepts/Feature%20Flags.html#note_1) | 是       | 是         | 是               |
| com.delphix:embedded_data            | 否      | 是                                                                                         | 是                                                                                         | 是                                                                                         | 是                                                                                         | 是                                                                                         | 是       | 是         | 是               |
| com.delphix:empty_bpobj              | 是      | 是                                                                                         | 是                                                                                         | 是                                                                                         | 是                                                                                         | 是                                                                                         | 是       | 是         | 是               |
| com.delphix:enabled_txg              | 是      | 是                                                                                         | 是                                                                                         | 是                                                                                         | 是                                                                                         | 是                                                                                         | 是       | 是         | 是               |
| com.datto:encryption                 | 否      | 否                                                                                         | 否                                                                                         | 是                                                                                         | 是                                                                                         | 是                                                                                         | 是       | 是         | 是               |
| com.delphix:extensible_dataset       | 否      | 是                                                                                         | 是                                                                                         | 是                                                                                         | 是                                                                                         | 是                                                                                         | 是       | 是         | 是               |
| com.klarasystems:fast_dedup          | 是      | 否                                                                                         | 否                                                                                         | 否                                                                                         | 否                                                                                         | 否                                                                                         | 否       | 是         | 是               |
| com.joyent:filesystem_limits         | 是      | 是                                                                                         | 是                                                                                         | 是                                                                                         | 是                                                                                         | 是                                                                                         | 是       | 是         | 是               |
| com.delphix:head_errlog              | 否      | 否                                                                                         | 否                                                                                         | 否                                                                                         | 否                                                                                         | 否                                                                                         | 是       | 是         | 是               |
| com.delphix:hole_birth               | 否      | 是                                                                                         | 是                                                                                         | 是                                                                                         | 是                                                                                         | 是                                                                                         | 是       | 是         | 是               |
| org.open-zfs:large_blocks            | 否      | 是                                                                                         | 是                                                                                         | 是                                                                                         | 是                                                                                         | 是                                                                                         | 是       | 是         | 是               |
| org.zfsonlinux:large_dnode           | 否      | 否                                                                                         | 是                                                                                         | 是                                                                                         | 是                                                                                         | 是                                                                                         | 是       | 是         | 是               |
| com.klarasystems:large_microzap      | 是      | 否                                                                                         | 否                                                                                         | 否                                                                                         | 否                                                                                         | 否                                                                                         | 否       | 是         | 是               |
| com.delphix:livelist                 | 是      | 否                                                                                         | 否                                                                                         | 否                                                                                         | 是                                                                                         | 是                                                                                         | 是       | 是         | 是               |
| com.delphix:log_spacemap             | 是      | 否                                                                                         | 否                                                                                         | 否                                                                                         | 是                                                                                         | 是                                                                                         | 是       | 是         | 是               |
| org.zfsonlinux:longname              | 否      | 否                                                                                         | 否                                                                                         | 否                                                                                         | 否                                                                                         | 否                                                                                         | 否       | 是         | 是               |
| org.illumos:lz4_compress             | 否      | 是                                                                                         | 是                                                                                         | 是                                                                                         | 是                                                                                         | 是                                                                                         | 是       | 是         | 是               |
| com.nexenta:meta_devices             | 是      | 否                                                                                         | 否                                                                                         | 否                                                                                         | 否                                                                                         | 否                                                                                         | 否       | 否         | 否               |
| com.joyent:multi_vdev_crash_dump     | 否      | 否                                                                                         | 是                                                                                         | 是                                                                                         | 是                                                                                         | 是                                                                                         | 是       | 是         | 是               |
| com.delphix:obsolete_counts          | 是      | 否                                                                                         | 否                                                                                         | 是                                                                                         | 是                                                                                         | 是                                                                                         | 是       | 是         | 是               |
| com.truenas:physical_rewrite         | 是      | 否                                                                                         | 否                                                                                         | 否                                                                                         | 否                                                                                         | 否                                                                                         | 否       | 否         | 是               |
| org.zfsonlinux:project_quota         | 是      | 否                                                                                         | 否                                                                                         | 是                                                                                         | 是                                                                                         | 是                                                                                         | 是       | 是         | 是               |
| org.openzfs:raidz_expansion          | 否      | 否                                                                                         | 否                                                                                         | 否                                                                                         | 否                                                                                         | 否                                                                                         | 否       | 是         | 是               |
| com.delphix:redacted_datasets        | 否      | 否                                                                                         | 否                                                                                         | 否                                                                                         | 是                                                                                         | 是                                                                                         | 是       | 是         | 是               |
| com.delphix:redaction_bookmarks      | 否      | 否                                                                                         | 否                                                                                         | 否                                                                                         | 是                                                                                         | 是                                                                                         | 是       | 是         | 是               |
| com.delphix:redaction_list_spill     | 否      | 否                                                                                         | 否                                                                                         | 否                                                                                         | 否                                                                                         | 否                                                                                         | 否       | 是         | 是               |
| com.datto:resilver_defer             | 是      | 否                                                                                         | 否                                                                                         | 是                                                                                         | 是                                                                                         | 是                                                                                         | 是       | 是         | 是               |
| org.illumos:sha512                   | 否      | 否                                                                                         | 是                                                                                         | 是                                                                                         | 是                                                                                         | 是                                                                                         | 是       | 是         | 是               |
| org.illumos:skein                    | 否      | 否                                                                                         | 是                                                                                         | 是                                                                                         | 是                                                                                         | 是                                                                                         | 是       | 是         | 是               |
| com.delphix:spacemap_histogram       | 是      | 是                                                                                         | 是                                                                                         | 是                                                                                         | 是                                                                                         | 是                                                                                         | 是       | 是         | 是               |
| com.delphix:spacemap_v2              | 是      | 否                                                                                         | 否                                                                                         | 是                                                                                         | 是                                                                                         | 是                                                                                         | 是       | 是         | 是               |
| org.zfsonlinux:userobj_accounting    | 是      | 否                                                                                         | 是                                                                                         | 是                                                                                         | 是                                                                                         | 是                                                                                         | 是       | 是         | 是               |
| com.nexenta:vdev_properties          | 是      | 否                                                                                         | 否                                                                                         | 否                                                                                         | 否                                                                                         | 否                                                                                         | 否       | 否         | 否               |
| com.klarasystems:vdev_zaps_v2        | 否      | 否                                                                                         | 否                                                                                         | 否                                                                                         | 否                                                                                         | 否                                                                                         | 是       | 是         | 是               |
| com.nexenta:wbc                      | 否      | 否                                                                                         | 否                                                                                         | 否                                                                                         | 否                                                                                         | 否                                                                                         | 否       | 否         | 否               |
| org.openzfs:zilsaxattr               | 是      | 否                                                                                         | 否                                                                                         | 否                                                                                         | 否                                                                                         | 否                                                                                         | 是       | 是         | 是               |
| com.delphix:zpool_checkpoint         | 是      | 否                                                                                         | 否                                                                                         | 是                                                                                         | 是                                                                                         | 是                                                                                         | 是       | 是         | 是               |
| org.freebsd:zstd_compress            | 否      | 否                                                                                         | 否                                                                                         | 否                                                                                         | 是                                                                                         | 是                                                                                         | 是       | 是         | 是               |

**注释**

1. [FreeBSD 在内置 OpenZFS 2.1 版本之前未启用 Edonr 支持](https://github.com/openzfs/zfs/pull/12735)
2. 对于 `com.datto:encryption`，[虽然 Illumos 的加密逻辑几乎相同，但其格式与 OpenZFS 加密格式并非 100% 兼容，因此跨平台加密可能存在问题](https://illumos.topicbox.com/groups/discuss/Ta2162fbb2358fa0e)

此表格由解析特性标志手册页生成，完全依赖于良好且准确的文档。

最后更新时间：2026-02-13T03:56:29.513734Z，使用 [compatibility_matrix.py](https://github.com/openzfs/openzfs-docs/tree/master/scripts/compatibility_matrix.py)。
